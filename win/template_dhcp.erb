option domain-name-servers <%= @domain_name_server%>;

default-lease-time <%= @default%>;
max-lease-time <%= @max%>;
lease-file-name "/var/db/dhcpd/dhcpd.leases";
authoritative;
log-facility local7;

<% @data_subnet.each_hash do |row_subnet| %>
subnet <%= row_subnet['subnet']%> netmask <%= row_subnet['netmask']%> {
	option broadcast-address <%= row_subnet['broadcast']%>;
	option routers <%= row_subnet['router']%>;

	# Only Know client get this pool
	pool {

        	range <%= row_subnet['range1']%> <%= row_subnet['range2']%>;
		max-lease-time 60;
		deny unknown-clients;

		<% @data_dhcp.each_hash do |row1| -%>
		host <%= row1['name']%> {
			hardware ethernet <%= row1['hw']%>;
			fixed-address <%= row1['ip']%>;
		}
		<%- end -%>
		<% @data_class_wifi.each_hash do |row1| -%>
		host <%= row1['wifi_id']%> {
		        hardware ethernet <%= row1['mac']%>;
			fixed-address <%= row1['ip']%>;
		}
		<%- end -%>
	}
}
<% end %>

